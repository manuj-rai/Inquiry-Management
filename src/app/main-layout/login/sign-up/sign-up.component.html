<div class="dialog-header">
    <h2 mat-dialog-title style="color: #36f;">Sign Up</h2>
    <button mat-icon-button mat-dialog-close aria-label="Close dialog" style="width: 40px; padding: 0;">
        <mat-icon>close</mat-icon>
    </button>
</div>

<mat-dialog-content>
    <form #userForm="ngForm" (ngSubmit)="onSubmit(userForm)">
        <!-- Department Dropdown -->
        <div class="form-group">
          <select id="departmentId" name="departmentId" ngModel required class="form-control" [(ngModel)]="selectedDepartment">
            <option value="" disabled>Select Department</option>
            <option *ngFor="let dept of departments" [value]="dept.id">{{ dept.name }}</option>
          </select>
          <div *ngIf="userForm.submitted && userForm.controls['departmentId']?.invalid" class="invalid-feedback">
            Department is required.
          </div>
        </div>
    
        <!-- Name Input -->
        <div class="form-group">
          <input type="text" id="name" name="name" ngModel required class="form-control" placeholder="Name" />
          <div *ngIf="userForm.submitted && userForm.controls['name']?.invalid" class="invalid-feedback">
            Name is required.
          </div>
        </div>
    
        <!-- Username Input -->
        <div class="form-group">
          <input type="text" id="username" name="username" ngModel required class="form-control" placeholder="Username" />
          <div *ngIf="userForm.submitted && userForm.controls['username']?.invalid" class="invalid-feedback">
            Username is required.
          </div>
        </div>
    
        <!-- Email Input -->
        <div class="form-group">
          <input type="email" id="email" name="email" ngModel required email class="form-control" placeholder="Email" />
          <div *ngIf="userForm.submitted && userForm.controls['email']?.invalid" class="invalid-feedback">
            Please enter a valid email.
          </div>
        </div>
    
        <!-- Password Input -->
        <div class="form-group">
          <input type="password" id="password" name="password" ngModel required minlength="4"  class="form-control" placeholder="Password" />
          <div *ngIf="userForm.submitted && userForm.controls['password']?.errors?.['required']" class="invalid-feedback">
            Password is required.
          </div>
          <div *ngIf="userForm.submitted && userForm.controls['password']?.errors?.['minlength']" class="invalid-feedback">
            Password must be at least 4 characters long.
          </div>    
        </div>
    
        <!-- Phone Number Input -->
        <div class="form-group">
          <input type="text" id="phoneNumber" name="phoneNumber" ngModel required pattern="[0-9]{10}" class="form-control" placeholder="Phone Number" />
          <div *ngIf="userForm.submitted && userForm.controls['phoneNumber']?.invalid" class="invalid-feedback">
            Please enter a valid phone number (10 digits).
          </div>
        </div>
    
        <!-- File Upload -->
        <div class="form-group">
          <input
            type="file"
            id="profilePic"
            name="profilePic"
            ngModel
            (change)="onFileChange($event)"
            required
          />
          <label for="profilePic">{{ fileName || 'Upload Profile Picture' }}</label>
          <div *ngIf="userForm.submitted && !fileName" class="invalid-feedback">
            Profile picture is required.
          </div>
        </div>
    
        <!-- Submit Button -->
        <button type="submit" class="btn btn-primary" [ngClass]="{'new-user-btn-disabled': userForm.invalid}">Submit</button>
      </form>
</mat-dialog-content>
